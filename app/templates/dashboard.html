{% extends "base.html" %}
{% block title %}é¦–é¡µ â€” ç”µå•†å¹³å°ç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block content %}
<!-- é¡µé¢æ ‡é¢˜ -->
<h2 style="margin-bottom: 20px; font-size: 20px;">ğŸ“Š æ•°æ®æ¦‚è§ˆ</h2>

<!-- ç»Ÿè®¡é¢æ¿ -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="label">ğŸ“‹ æ€»è®¢å•æ•°</div>
        <div class="value">{{ total_orders }}</div>
    </div>
    <div class="stat-card">
        <div class="label">ğŸ“… ä»Šæ—¥è®¢å•</div>
        <div class="value">{{ today_orders }}</div>
    </div>
    <div class="stat-card">
        <div class="label">âœ… æˆåŠŸè®¢å•</div>
        <div class="value" style="color: #34a853;">{{ success_orders }}</div>
    </div>
    <div class="stat-card">
        <div class="label">â³ å¤„ç†ä¸­è®¢å•</div>
        <div class="value" style="color: #b45309;">{{ pending_orders }}</div>
    </div>
</div>

<!-- æœ€è¿‘è®¢å• -->
<div class="card">
    <h2>ğŸ“ƒ æœ€è¿‘è®¢å•</h2>
    <table>
        <thead>
            <tr>
                <th>æˆ‘æ–¹è®¢å•å·</th>
                <th>äº¬ä¸œè®¢å•å·</th>
                <th>ä¸šåŠ¡ç±»å‹</th>
                <th>è®¢å•çŠ¶æ€</th>
                <th>é‡‘é¢ï¼ˆå…ƒï¼‰</th>
                <th>åˆ›å»ºæ—¶é—´</th>
            </tr>
        </thead>
        <tbody>
            {% for order in recent_orders %}
            <tr>
                <td>{{ order.order_no }}</td>
                <td>{{ order.jd_order_no }}</td>
                <td>
                    {% if order.biz_type == 1 %}
                        <span class="badge badge-info">é€šç”¨äº¤æ˜“</span>
                    {% else %}
                        <span class="badge badge-info">æ¸¸æˆç‚¹å¡</span>
                    {% endif %}
                </td>
                <td>
                    {% if order.order_status == 0 or order.order_status == 1 %}
                        <span class="badge badge-success">æˆåŠŸ</span>
                    {% elif order.order_status == 2 %}
                        <span class="badge badge-danger">å¤±è´¥</span>
                    {% elif order.order_status == 3 %}
                        <span class="badge badge-warning">å¤„ç†ä¸­</span>
                    {% elif order.order_status == 4 %}
                        <span class="badge badge-danger">å¼‚å¸¸</span>
                    {% else %}
                        <span class="badge">æœªçŸ¥</span>
                    {% endif %}
                </td>
                <td>{{ "%.2f"|format((order.amount or 0) / 100) }}</td>
                <td>{{ order.create_time.strftime('%Y-%m-%d %H:%M:%S') if order.create_time else '-' }}</td>
            </tr>
            {% endfor %}
            {% if not recent_orders %}
            <tr>
                <td colspan="6" style="text-align: center; color: #999; padding: 40px;">æš‚æ— è®¢å•æ•°æ®</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
