{% extends "layouts/base.html" %}
{% block title %}è®¢å•è¯¦æƒ…{% endblock %}

{% block content %}
<div class="card">
    <div class="flex justify-between items-center mb-4">
        <div class="card-title">ğŸ“„ è®¢å•è¯¦æƒ…</div>
        <a href="{{ url_for('order.order_list') }}" class="btn">â† è¿”å›åˆ—è¡¨</a>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label>æˆ‘æ–¹è®¢å•å·</label>
            <div>{{ order.order_no }}</div>
        </div>
        <div class="form-group">
            <label>äº¬ä¸œè®¢å•å·</label>
            <div>{{ order.jd_order_no }}</div>
        </div>
        <div class="form-group">
            <label>è®¢å•çŠ¶æ€</label>
            <div>
                {% if order.order_status == 0 %}
                <span class="badge badge-default">å¾…æ”¯ä»˜</span>
                {% elif order.order_status == 1 %}
                <span class="badge badge-warning">å¤„ç†ä¸­</span>
                {% elif order.order_status == 2 %}
                <span class="badge badge-success">å·²å®Œæˆ</span>
                {% elif order.order_status == 3 %}
                <span class="badge badge-danger">å·²å–æ¶ˆ</span>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label>åº—é“º</label>
            <div>{{ order.shop.shop_name if order.shop else '-' }}</div>
        </div>
        <div class="form-group">
            <label>åº—é“ºç±»å‹</label>
            <div>{{ order.shop_type_label }}</div>
        </div>
        <div class="form-group">
            <label>è®¢å•ç±»å‹</label>
            <div>{{ order.order_type_label }}</div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label>å•†å“SKU</label>
            <div>{{ order.sku_id or '-' }}</div>
        </div>
        <div class="form-group">
            <label>å•†å“ä¿¡æ¯</label>
            <div>{{ order.product_info or '-' }}</div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label>é‡‘é¢</label>
            <div>Â¥{{ order.amount_yuan }}</div>
        </div>
        <div class="form-group">
            <label>æ•°é‡</label>
            <div>{{ order.quantity }}</div>
        </div>
        <div class="form-group">
            <label>å……å€¼è´¦å·</label>
            <div>{{ order.produce_account or '-' }}</div>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label>åˆ›å»ºæ—¶é—´</label>
            <div>{{ order.create_time.strftime('%Y-%m-%d %H:%M:%S') if order.create_time else '-' }}</div>
        </div>
        <div class="form-group">
            <label>æ”¯ä»˜æ—¶é—´</label>
            <div>{{ order.pay_time.strftime('%Y-%m-%d %H:%M:%S') if order.pay_time else '-' }}</div>
        </div>
        <div class="form-group">
            <label>å‘è´§æ—¶é—´</label>
            <div>{{ order.deliver_time.strftime('%Y-%m-%d %H:%M:%S') if order.deliver_time else '-' }}</div>
        </div>
    </div>

    {% if order.order_type == 2 and order.card_info_parsed %}
    <div class="section-title">ğŸ”‘ å¡å¯†ä¿¡æ¯</div>
    <div class="table-wrapper">
        <table>
            <thead><tr><th>#</th><th>å¡å·</th><th>å¯†ç </th></tr></thead>
            <tbody>
                {% for card in order.card_info_parsed %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ card.cardNo }}</td>
                    <td>{{ card.cardPwd }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <div class="form-row">
        <div class="form-group">
            <label>å›è°ƒçŠ¶æ€</label>
            <div>
                {% if order.notify_status == 0 %}æœªå›è°ƒ
                {% elif order.notify_status == 1 %}âœ… æˆåŠŸ
                {% else %}âŒ å¤±è´¥{% endif %}
            </div>
        </div>
        <div class="form-group">
            <label>é€šçŸ¥çŠ¶æ€</label>
            <div>{{ 'å·²é€šçŸ¥' if order.notified == 1 else 'æœªé€šçŸ¥' }}</div>
        </div>
    </div>

    {% if order.remark %}
    <div class="form-group">
        <label>å¤‡æ³¨</label>
        <div>{{ order.remark }}</div>
    </div>
    {% endif %}
</div>
{% endblock %}
